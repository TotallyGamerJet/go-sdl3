# Contribute

- Embed static binaries for other platforms?

## Structure

- A json description of SDL3 API is generated ([`ffi.json`](cmd/ffi2go/ffi.json)) using [c2ffi](https://github.com/rpav/c2ffi) from [docker](Dockerfile).
- The [API quick reference](https://wiki.libsdl.org/SDL3/QuickReference) is downloaded in [cmd/ffi2go/ref.h](cmd/ffi2go/ref.h) and serves as a base to determine the list of API functions.
- All `*.gen.go` files are generated by running [cmd/ffi2go](cmd/ffi2go/), it uses both `ffi.json` and `ref_h`.
- [methods.go](methods.go) contains pointer receiver functions, some don't make sense as they have been generated as a starting point by [cmd/methodgen](cmd/methodgen/) and need tweaking. Most of these methods `panic` and need a developer input to be sanitized (idiomatic Go) and checked against SDL3 spec.
- Functions are defined unexposed (with a `i` prefix) and registered to [purego](https://github.com/ebitengine/purego), they have a comment when they require a call to `sdlFree` (you can also find the list of functions requiring sdlFree, hardcoded in ffi2go binary).
- [extra.go](extra.go) contains glue code that couldn't be generated efficiently.
- I arranged global functions in [graphics.go](graphics.go), [input.go](input.go), [output_av.go](output_av.go), [system.go](system.go) and [global.go](global.go). I'm not sure about the names, or this organization at all, suggestions are welcome!

Feel free, to help for testing, examples, expose some functions.
Also to help re-organize, rename, refactor, as some directions have been taken arbitrarily. 

## Generate

- `go install github.com/go-task/task/v3/cmd/task@latest`
- `task generate-bindings`